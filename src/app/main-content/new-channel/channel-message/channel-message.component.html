<div class="timeSeperator">
  <img class="line" src="./assets/img/auth/line.svg" alt="" />

  @if(currentDate == this.formatDate(this.channelMessage.createdAt)){  
  <span>Heute</span>
  } @else {
  <span>{{
    channelMessage.createdAt | firestoreTimestamp | date : "EEEE, d. MMMM"
  }}</span>
  }
</div>

<div
  class="content"
  [ngStyle]="{ 'flex-direction': isMessageFromYou ? 'row' : 'row-reverse' }"
  (mouseenter)="hovered = true"
  (mouseleave)="deleteHovered()"
>
  <div class="avatar pointer">
    <img src="{{ this.user.avatar }}" alt="" />
  </div>
  <div
    class="main"
    [ngStyle]="{ 'align-items': isMessageFromYou ? 'flex-start' : 'flex-end' }"
  >
    <div
      class="message-content pointer"
      [ngStyle]="{
        'align-items': isMessageFromYou ? 'flex-start' : 'flex-end'
      }"
    >
      <div
        class="creator-infos"
        [ngStyle]="{
          'flex-direction': isMessageFromYou ? 'row' : 'row-reverse'
        }"
      >
        <div class="creator">{{ this.user.displayName }}</div>
        <div class="time">
          {{ channelMessage.createdAt | firestoreTimestamp | date : "HH:mm" }}
          Uhr
        </div>
      </div>

      @if(isMessageFromYou){
      <div
        class="message text-white"
        [ngStyle]="{
          'background-color': hovered ? '#797EF3' : '#797EF3',
          'border-radius': isMessageFromYou
            ? '0 30px 30px 30px'
            : '30px 0 30px 30px'
        }"
      >
        {{ channelMessage.text }}
      </div>
      } @else {
      <div
        class="message"
        [ngStyle]="{
          'background-color': hovered ? '#FFFFFF' : '#ECEEFE',
          'border-radius': isMessageFromYou
            ? '0 30px 30px 30px'
            : '30px 0 30px 30px'
        }"
      >
        {{ channelMessage.text }}
      </div>
      }

      <!-- hier muss noch eine Prüfung rein auf Threads -->
      <div
        class="thread-infos"
        [ngStyle]="{
          'flex-direction': isMessageFromYou ? 'row' : 'row-reverse'
        }"
      >
        <a href="http://localhost:4200/new-channel/9KJYLfxx07Wn5rbEupdA"
          >2 Antworten</a
        >
        <span
          class="last-thread"
          [ngStyle]="{ color: hovered ? '#000000' : '#686868' }"
          >Letzte Antwort 14:56</span
        >
      </div>
      <!-- Ende Prüfung auf Threads -->
    </div>
    <div class="reaction-infos">
      <div class="reactions">
        <div class="reaction-group pointer">
          <img class="reaction-icon" src="./assets/img/emojis/1.svg" alt="" />
          <div class="reaction-count">2</div>
        </div>
        <div class="reaction-group pointer">
          <img class="reaction-icon" src="./assets/img/emojis/2.svg" alt="" />
          <div class="reaction-count">1</div>
        </div>
      </div>
      <img
        class="new-reaction pointer"
        src="./assets/img/emojis/add_reaction.svg"
        alt=""
        (click)="openEmojiPicker()"
      />
    </div>
  </div>
</div>
