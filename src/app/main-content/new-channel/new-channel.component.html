<div class="container">
  <app-header-mobile></app-header-mobile>
  <div class="mdc-card">
    <div
      class="channel-box pointer"
      [id]="itemID"
      (click)="openChannel($event, 'channel-edition')"
    >
      <h1 class="no-margin">
        <span>#</span>
        <span>{{ channel.name }}</span>
      </h1>
      <img src="./assets/img/icon/arrow_down.svg" alt="" />
    </div>
    <div>
      <img
        class="pointer"
        (click)="toggleOverlay('overlay1')"
        src="./assets/img/icon/add_member.svg"
        alt=""
      />
    </div>
  </div>
  <div class="content">
    <div
      class="message-content"
      #messageContent
      style="overflow-y: scroll; height: 100%"
    >
      @if(this.firestore.channelMessages.length !== 0){ @for (channelMessage of
      this.firestore.channelMessages; track channelMessage.id) {
      <app-channel-message
        [channelMessage]="channelMessage"
      ></app-channel-message>
      } } @else {
      <div class="channel-info">
        <h1 class="no-margin">
          <span>#</span>
          <span>{{ channel.name }}</span>
        </h1>
        <p>
          Du hast diesen Channel heute erstellt. Das ist der Anfang des Channels
          {{ channel.name }}
        </p>
      </div>
      }
    </div>
  </div>

  <app-text-box [textBoxData]="textBoxData"></app-text-box>
</div>

<div id="overlay1" style="display: none" class="overlay">
  <div class="overlay-content">
    <div class="display-flex">
      <h1 class="no-margin">Mitglieder</h1>
      <img
        src="./assets/img/icon/close.svg"
        alt=""
        (click)="closeOverlay('overlay1')"
      />
    </div>
    <div class="members">
      @for (user of this.firestore.getUsers(); track $index) {
      <div class="profil">
        <img class="img-profil" src="{{ user.avatar }}" alt="" />

        @if(user.isOnline){
        <img
          src="./assets/img/characters/online.svg"
          alt="Online"
          class="online-avatar"
        />
        } @else {
        <img
          src="./assets/img/characters/offline.svg"
          alt="Offline"
          class="offline-avatar"
        />
        }

        <p class="no-margin">{{ user.displayName }}</p>
      </div>
      }
      <div class="profil">
        <img class="height" src="./assets/img/icon/add_member.svg" alt="" />
        <p (click)="toggleOverlay('overlay2')" class="no-margin">
          Mitglied hinzufügen
        </p>
      </div>
    </div>
  </div>
</div>

<div id="overlay2" style="display: none" class="overlay">
  <div class="overlay-content">
    <div class="display-flex">
      <h1 class="no-margin">Leute hinzufügen</h1>
      <img
        src="./assets/img/icon/close.svg"
        alt=""
        (click)="closeOverlay('overlay2')"
      />
    </div>
    <input class="search-input" type="text" placeholder="Name eingeben" />
    <div class="btn-pos">
      <button class="add-button" (click)="closeOverlay('overlay2')">
        Hinzufügen
      </button>
    </div>
  </div>
</div>
