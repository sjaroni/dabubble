<div class="timeSeperator">
  <img class="line" src="./assets/img/auth/line.svg" alt="" />

  @if (currentDate ==
  this.dateFormatService.formatDateYYYYMMDD(channelMessage.createdAt)) {
  <span>Heute</span>
  } @else {
  <span>{{ this.dateFormatService.formatDate(channelMessage.createdAt) }}</span>
  }
</div>

<div
  class="content"
  [ngStyle]="{ 'flex-direction': isMessageFromYou ? 'row' : 'row-reverse' }"
  (mouseenter)="hovered = true"
  (mouseleave)="deleteHovered()"
>
  <div class="avatar pointer">
    <img src="{{ this.user.avatar }}" alt="" />
  </div>
  <div
    class="main"
    [ngStyle]="{ 'align-items': isMessageFromYou ? 'flex-start' : 'flex-end' }"
  >
    <div
      class="message-content pointer"
      [ngStyle]="{
        'align-items': isMessageFromYou ? 'flex-start' : 'flex-end'
      }"
    >
      <div
        class="creator-infos"
        [ngStyle]="{
          'flex-direction': isMessageFromYou ? 'row' : 'row-reverse'
        }"
      >
        <div class="creator">{{ this.user.displayName }}</div>
        <div class="time">
          {{ this.dateFormatService.formatTime(channelMessage.createdAt) }}
          Uhr
        </div>
      </div>

      @if (isMessageFromYou) {
      <div
        class="message text-white"
        [ngStyle]="{
          'background-color': hovered ? '#797EF3' : '#797EF3',
          'border-radius': isMessageFromYou
            ? '0 30px 30px 30px'
            : '30px 0 30px 30px'
        }"
      >
        {{ channelMessage.text }}
      </div>
      } @else {
      <div
        class="message"
        [ngStyle]="{
          'background-color': hovered ? '#FFFFFF' : '#ECEEFE',
          'border-radius': isMessageFromYou
            ? '0 30px 30px 30px'
            : '30px 0 30px 30px'
        }"
      >
        {{ channelMessage.text }}
      </div>
      } @if (channelMessage.attachment) {
      <div class="attachment-list">
        @for (item of channelMessage.attachment; track $index) { @if(item !==
        'undefined'){
        <img class="attachment" src="{{ item }}" />
        } }
      </div>
      }

      <!-- hier muss noch eine Prüfung rein auf Threads -->
      <div
        class="thread-infos"
        [ngStyle]="{
          'flex-direction': isMessageFromYou ? 'row' : 'row-reverse'
        }"
      >
        <a href="http://localhost:4200/new-channel/9KJYLfxx07Wn5rbEupdA"
          >2 Antworten</a
        >
        <span
          class="last-thread"
          [ngStyle]="{ color: hovered ? '#000000' : '#686868' }"
          >Letzte Antwort 14:56</span
        >
      </div>
      <!-- Ende Prüfung auf Threads -->
    </div>
    <div class="reaction-infos">
      <div class="reactions">
        <div
          *ngFor="let reaction of emojiReactions"
          class="reaction-group pointer"
        >
          <span class="reaction-icon" (click)="toggleReaction(reaction)">{{ reaction.emoji }}</span>
          <div class="reaction-count">{{ reaction.count }}</div>
        </div>

        <!--        <div *ngIf="isEmojiSelected" class="reaction-group pointer">-->
        <!--          <span class="reaction-icon">{{ emojiCharacter }}</span>-->
        <!--          <div class="reaction-count">2</div>-->
        <!--        </div>-->
        <!--        <div class="reaction-group pointer">-->
        <!--          <span class="reaction-icon">{{ emojiCharacter }}</span>-->
        <!--          <div class="reaction-count">2</div>-->
        <!--        </div>-->
        <!--        <div class="reaction-group pointer">-->
        <!--          <img class="reaction-icon" src="./assets/img/emojis/2.svg" alt="" />-->
        <!--          <div class="reaction-count">1</div>-->
        <!--        </div>-->
      </div>
      <img
        class="new-reaction pointer"
        src="./assets/img/emojis/add_reaction.svg"
        alt=""
        (click)="openEmojiPicker()"
      />
    </div>
  </div>

  <div class="reactionBar">
    HALLO
  </div>

</div>
